<div class="explore-utility">
	<div class="ws-container">
		<span class="search-by">Select filters to narrow your search</span>
		<a class="results-count" href="#explore-results">See {{ ctrl.collections.length }} Collections and {{ ctrl.itineraries.length }} Itineraries <i class="icon icon-arrow-down"></i></a>
		<a class="clear-all" href="#/" ng-show="ctrl.hasFilters" ><i class="icon icon-small-close"></i> Clear filters</a>
	</div>
</div>

<nav class="explore-filters">

	<img src="http://ws.local/wp-content/themes/worldstrides/assets/images/ripple.svg" ng-show="ctrl.loading" class="loader" />

	<div class="ws-container" ng-hide="ctrl.loading">
	
		<ul class="current-filters list-unstyled clearfix">
			<li class="traveler-filters"></li>
			<li class="interests-filters"></li>
			<li class="destination-filters"></li>
		</ul>
		
		<ul class="filter-menus open list-unstyled clearfix">

			<li class="filter-menu traveler-menu">
				<div class="traveler-filters hide-sm toggle" ng-click="ctrl.toggleFilterMenu('.traveler-menu-container')"></div>

				<div class="traveler-menu-container menu-container closed">
					<ul class="terms-list list-unstyled clearfix visible">
						
						<li ng-repeat="traveler in ctrl.travelers" class="term">
							<a term-href="{{traveler.slug}},travelers" class="filter" data-filter-list=".traveler-filters" ng-bind-html="traveler.name"></a>
						</li>
						
					</ul>
				</div>

				<span class="arrow icon-arrow-down hide-sm"></span>
			</li>

			<li class="filter-menu interests-menu">
				<div class="interests-filters toggle hide-sm" ng-click="ctrl.toggleFilterMenu('.interests-menu-container')"></div>

				<div class="interests-menu-container menu-container closed">

					<ul id="interests-parent" ng-class="{visible: ctrl.showInterestsList == 'interests-parent'}" class="interests-parent terms-list-parent terms-list list-unstyled clearfix">
						
						<li ng-repeat="interest in ctrl.interests" class="term">
							<a ng-click="ctrl.showTermList('interest', interest.slug)" class="term-list-toggle parent-term parent-interest">
								<i class="icon icon-{{interest.slug}}"></i>
								<span ng-bind-html="interest.name"></span>
								<i class="icon icon-arrow-right"></i>
							</a>
						</li>

						<li class="term">
							<a term-href="faith-based,interests" class="filter" data-filter-list=".interests-filters">
								<i class="icon icon-faith-based"></i>
								Faith-based
							</a>
						</li>

						<li class="term">
							<a term-href="service,interests" class="filter" data-filter-list=".interests-filters">
								<i class="icon icon-service"></i>
								Service
							</a>
						</li>

					</ul>

						
					<ul id="{{interest.slug}}" ng-repeat="interest in ctrl.interests"  ng-class="{visible: ctrl.showInterestsList == interest.slug}" class="interests-child terms-list-child terms-list list-unstyled clearfix invisible">
						
						<li class="parent-term term">
							<a class="parent-interest">
								<i class="icon icon-{{interest.slug}}"></i>
								<span ng-bind-html="interest.name"></span>
							</a>
						</li>

						<li ng-repeat="child in interest.children" class="term">
							<a term-href="{{child.slug}},interests" class="filter" data-filter-list=".interests-filters" ng-bind-html="child.name">{{child.name}}</a>
						</li>
						
						<a ng-click="ctrl.showTermList('interest', 'interests-parent')" class="term-list-toggle">« Back to Interests</a>
					</ul>


				</div>

				<span class="arrow icon-arrow-down hide-sm"></span>
			</li>
			

			<li class="filter-menu destination-menu">
				<div class="destination-filters toggle hide-sm" ng-click="ctrl.toggleFilterMenu('.destination-menu-container')"></div>
				
				<div class="destination-menu-container menu-container closed">

					<ul id="destinations-parent" ng-class="{visible: ctrl.showDestinationsList == 'destinations-parent'}" class="destinations-parent terms-list-parent terms-list list-unstyled clearfix">
						<li class="destination-map">
							<span class="destination-graphic">
								<img src="{{ctrl.WS.theme}}/assets/images/map-global.png" alt="Global"/>
							</span>
						</li>
						<li>
							<ul class="terms list-unstyled clearfix">
								<li ng-repeat="continent in ctrl.continents" class="term">
									<a ng-click="ctrl.showTermList('destination', continent.slug)" class="filter term-list-toggle parent-term parent-destination" data-filter-list=".destination-filters" ng-bind-html="continent.name"></a>
								</li>
							</ul>
						</li>
					</ul>
						
					<ul id="{{continent.slug}}" ng-repeat="continent in ctrl.continents" ng-class="{visible: ctrl.showDestinationsList == continent.slug}" class="destinations-child terms-list-child terms-list list-unstyled clearfix invisible">
						<li class="destination-map">
							<span ng-bind-html="continent.name"></span>
							<span class="destination-graphic">
								<img src="{{ctrl.WS.theme}}/assets/images/map-{{continent.slug}}.png" alt="{{continent.name}}"/>
							</span>
						</li>
						<li>
							<ul class="terms list-unstyled clearfix">
								<li ng-repeat="child in continent.children" class="term">
									<a term-href="{{child.slug}},destinations" class="filter" data-filter-list=".destination-filters" ng-bind-html="child.name"></a>
								</li>
							</ul>
						</li>
						<a ng-click="ctrl.showTermList('destination', 'destinations-parent')" class="term-list-toggle">« Back to Destinations</a>
					</ul>

				</div>

				<span class="arrow icon-arrow-down hide-sm"></span>
			</li>

		</ul>

	</div>

</nav>


<!--
############################################################################
Results
############################################################################
-->


<section id="explore-results" class="explore-results section-content">

	<div class="collections show-previews" ng-show="ctrl.collections">
		<header class="results-header">
			<h2>Collections</h2>
		</header>
		<div class="results clearfix">

			<article ng-repeat="collection in ctrl.collections" class="tile tile-third" style="background-image:url( {{ collection.featured_image }} );" >
				<a href="{{ collection.link }}" ng-show="collection.featured_image">
					<img src="{{ collection.featured_image }}" alt="{{ collection.title }}" class="hide-sm itinerary-image" />
				</a>
				<div class="tile-content">
					<ul class="meta list-unstyled" ng-show="collection.meta">
						<li class="list-tag-no-link" ng-repeat="term in collection.meta" ng-bind-html="term.name"></li>
					</ul>
					<!-- <img class="smithsonian-image" alt="smithsonian" src="<?php echo esc_url( get_template_directory_uri() . '/assets/images/smithsonian-small.png' ); ?>" />
					<img class="smithsonian-image-mobile" alt="smithsonian" src="<?php echo esc_url( get_template_directory_uri() . '/assets/images/smithsonian-small-gray.png' ); ?>" /> -->
					<h3 class="h2 tile-title" ng-bind-html="collection.title"></h3>
				</div>

				<a class="tile-link" href="{{ collection.link }}"><span class="hide">Go to {{ collection.title }}</span></a>
			</article>
	
		</div>
		<a href="#toggle-results" class="toggle-results">See All Collections</a>
	</div>

	<div class="itineraries show-previews" ng-show="ctrl.itineraries">
		<header class="results-header">
			<h2>Itineraries</h2>
		</header>
		<div class="results clearfix">

			<article ng-repeat="itinerary in ctrl.itineraries" class="tile tile-third" style="background-image:url( {{ itinerary.featured_image }} );" >
				<a href="{{ itinerary.link }}" ng-show="itinerary.featured_image">
					<img src="{{ itinerary.featured_image }}" alt="{{ itinerary.title }}" class="hide-sm itinerary-image" />
				</a>
				<div class="tile-content">
					<ul class="meta list-unstyled" ng-show="itinerary.meta">
						<li class="list-tag-no-link" ng-repeat="term in itinerary.meta" ng-bind-html="term.name"></li>	
					</ul>
					<!-- <img class="smithsonian-image" alt="smithsonian" src="<?php echo esc_url( get_template_directory_uri() . '/assets/images/smithsonian-small.png' ); ?>" />
					<img class="smithsonian-image-mobile" alt="smithsonian" src="<?php echo esc_url( get_template_directory_uri() . '/assets/images/smithsonian-small-gray.png' ); ?>" /> -->
					<h3 class="h2 tile-title" ng-bind-html="itinerary.title"></h3>
				</div>

				<a class="tile-link" href="{{ itinerary.link }}"><span class="hide">Go to {{ itinerary.title }}</span></a>
			</article>
	
		</div>
		<a href="#toggle-results" class="toggle-results">See All Itineraries</a>
	</div>

</section>


