/*! WorldStrides - v0.1.0 - 2015-07-02
 * http://www.worldstrides.com
 * Copyright (c) 2015; * Licensed GPLv2+ */
!function(a,b,c){"use strict";a("body").hasClass("home")&&a(document).ready(function(){var c=a("#intro"),d=a("#quick-access-menu").innerHeight(),e=b.innerHeight-d;c.css({minHeight:e+"px"})})}(jQuery,window),function(a,b,c){"use strict";a(document).ready(function(){if(a("#office-map").length>0){L.mapbox.accessToken="pk.eyJ1Ijoid29ybGRzdHJpZGVzIiwiYSI6ImNjZTg3YjM3OTI3MDUzMzlmZmE4NDkxM2FjNjE4YTc1In0.dReWwNs7CEqdpK5AkHkJwg";var b=L.mapbox.map("office-map","worldstrides.b898407f",{scrollWheelZoom:!1,zoomControl:!1,center:[38.030266,-78.48363499999999],zoom:13}),c=JSON.parse(a("#offices-json").text()),d={type:"FeatureCollection",features:[]},e=L.mapbox.featureLayer().addTo(b);c&&(a(c).each(function(){var a={type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(this.about_offices_locations_coordinates.longitude),parseFloat(this.about_offices_locations_coordinates.latitude)]},properties:{title:this.name,icon:{iconUrl:"http://wsbeta.co/wp-content/themes/worldstrides/assets/images/pin@2x.png",iconSize:[20,60],iconAnchor:[10,30],popupAnchor:[0,-30],className:"dot"},iconHover:{iconUrl:"http://wsbeta.co/wp-content/themes/worldstrides/assets/images/pin-orange@2x.png",iconSize:[20,60],iconAnchor:[10,30],popupAnchor:[0,-30],className:"dot"}}};d.features.push(a)}),e.on("layeradd",function(a){var b=a.layer,c=b.feature;b.setIcon(L.icon(c.properties.icon))}).on("mouseover",function(a){var b=a.layer,c=b.feature;b.openPopup(),b.setIcon(L.icon(c.properties.iconHover))}).on("mouseout",function(a){var b=a.layer,c=b.feature;b.closePopup(),b.setIcon(L.icon(c.properties.icon))}),b.on("ready",function(){e.setGeoJSON(d),b.fitBounds(e.getBounds())}))}})}(jQuery),function(a,b,c){"use strict";var d=document.querySelectorAll(".resource-target"),e=document.querySelectorAll(".resource-question a"),f=document.querySelectorAll(".section-nav");a(document).ready(function(){a(d).first().addClass("active"),a(e).on("click",function(b){b.preventDefault(),a(this).closest(".resource-question").toggleClass("open").children(".entry-content").slideToggle("fast")}),a(d).on({focus:function(){a(this).closest(".resource-target").addClass("active").siblings(".resource-target").removeClass("active")},click:function(b){b.preventDefault(),a(this).closest(".resource-target").addClass("active").siblings(".resource-target").removeClass("active")}},"> a"),a(f).scrollToFixed()})}(jQuery),function(a){a.isScrollToFixed=function(b){return!!a(b).data("ScrollToFixed")},a.ScrollToFixed=function(b,c){function d(){x.trigger("preUnfixed.ScrollToFixed"),k(),x.trigger("unfixed.ScrollToFixed"),B=-1,y=x.offset().top,z=x.offset().left,q.options.offsets&&(z+=x.offset().left-x.position().left),-1==A&&(A=z),r=x.css("position"),w=!0,-1!=q.options.bottom&&(x.trigger("preFixed.ScrollToFixed"),i(),x.trigger("fixed.ScrollToFixed"))}function e(){var a=q.options.limit;return a?"function"==typeof a?a.apply(x):a:0}function f(){return"fixed"===r}function g(){return"absolute"===r}function h(){return!(f()||g())}function i(){if(!f()){var a=x[0].getBoundingClientRect();C.css({display:x.css("display"),width:a.width,height:a.height,"float":x.css("float")}),cssOptions={"z-index":q.options.zIndex,position:"fixed",top:-1==q.options.bottom?m():"",bottom:-1==q.options.bottom?"":q.options.bottom,"margin-left":"0px"},q.options.dontSetWidth||(cssOptions.width=x.css("width")),x.css(cssOptions),x.addClass(q.options.baseClassName),q.options.className&&x.addClass(q.options.className),r="fixed"}}function j(){var a=e(),b=z;q.options.removeOffsets&&(b="",a-=y),cssOptions={position:"absolute",top:a,left:b,"margin-left":"0px",bottom:""},q.options.dontSetWidth||(cssOptions.width=x.css("width")),x.css(cssOptions),r="absolute"}function k(){h()||(B=-1,C.css("display","none"),x.css({"z-index":v,width:"",position:s,left:"",top:u,"margin-left":""}),x.removeClass("scroll-to-fixed-fixed"),q.options.className&&x.removeClass(q.options.className),r=null)}function l(a){a!=B&&(x.css("left",z-a),B=a)}function m(){var a=q.options.marginTop;return a?"function"==typeof a?a.apply(x):a:0}function n(){if(a.isScrollToFixed(x)&&!x.is(":hidden")){var b=w,c=h();w?h()&&(y=x.offset().top,z=x.offset().left):d();var n=a(window).scrollLeft(),r=a(window).scrollTop(),t=e();q.options.minWidth&&a(window).width()<q.options.minWidth?h()&&b||(p(),x.trigger("preUnfixed.ScrollToFixed"),k(),x.trigger("unfixed.ScrollToFixed")):q.options.maxWidth&&a(window).width()>q.options.maxWidth?h()&&b||(p(),x.trigger("preUnfixed.ScrollToFixed"),k(),x.trigger("unfixed.ScrollToFixed")):-1==q.options.bottom?t>0&&r>=t-m()?c||g()&&b||(p(),x.trigger("preAbsolute.ScrollToFixed"),j(),x.trigger("unfixed.ScrollToFixed")):r>=y-m()?(f()&&b||(p(),x.trigger("preFixed.ScrollToFixed"),i(),B=-1,x.trigger("fixed.ScrollToFixed")),l(n)):h()&&b||(p(),x.trigger("preUnfixed.ScrollToFixed"),k(),x.trigger("unfixed.ScrollToFixed")):t>0?r+a(window).height()-x.outerHeight(!0)>=t-(m()||-o())?f()&&(p(),x.trigger("preUnfixed.ScrollToFixed"),"absolute"===s?j():k(),x.trigger("unfixed.ScrollToFixed")):(f()||(p(),x.trigger("preFixed.ScrollToFixed"),i()),l(n),x.trigger("fixed.ScrollToFixed")):l(n)}}function o(){return q.options.bottom?q.options.bottom:0}function p(){var a=x.css("position");"absolute"==a?x.trigger("postAbsolute.ScrollToFixed"):"fixed"==a?x.trigger("postFixed.ScrollToFixed"):x.trigger("postUnfixed.ScrollToFixed")}var q=this;q.$el=a(b),q.el=b,q.$el.data("ScrollToFixed",q);var r,s,t,u,v,w=!1,x=q.$el,y=0,z=0,A=-1,B=-1,C=null,D=function(a){x.is(":visible")&&(w=!1,n())},E=function(a){window.requestAnimationFrame?requestAnimationFrame(n):n()},F=function(a){a=a||window.event,a.preventDefault&&a.preventDefault(),a.returnValue=!1};q.init=function(){q.options=a.extend({},a.ScrollToFixed.defaultOptions,c),v=x.css("z-index"),q.$el.css("z-index",q.options.zIndex),C=a("<div />"),r=x.css("position"),s=x.css("position"),t=x.css("float"),u=x.css("top"),h()&&q.$el.after(C),a(window).bind("resize.ScrollToFixed",D),a(window).bind("scroll.ScrollToFixed",E),"ontouchmove"in window&&a(window).bind("touchmove.ScrollToFixed",n),q.options.preFixed&&x.bind("preFixed.ScrollToFixed",q.options.preFixed),q.options.postFixed&&x.bind("postFixed.ScrollToFixed",q.options.postFixed),q.options.preUnfixed&&x.bind("preUnfixed.ScrollToFixed",q.options.preUnfixed),q.options.postUnfixed&&x.bind("postUnfixed.ScrollToFixed",q.options.postUnfixed),q.options.preAbsolute&&x.bind("preAbsolute.ScrollToFixed",q.options.preAbsolute),q.options.postAbsolute&&x.bind("postAbsolute.ScrollToFixed",q.options.postAbsolute),q.options.fixed&&x.bind("fixed.ScrollToFixed",q.options.fixed),q.options.unfixed&&x.bind("unfixed.ScrollToFixed",q.options.unfixed),q.options.spacerClass&&C.addClass(q.options.spacerClass),x.bind("resize.ScrollToFixed",function(){C.height(x.height())}),x.bind("scroll.ScrollToFixed",function(){x.trigger("preUnfixed.ScrollToFixed"),k(),x.trigger("unfixed.ScrollToFixed"),n()}),x.bind("detach.ScrollToFixed",function(b){F(b),x.trigger("preUnfixed.ScrollToFixed"),k(),x.trigger("unfixed.ScrollToFixed"),a(window).unbind("resize.ScrollToFixed",D),a(window).unbind("scroll.ScrollToFixed",E),x.unbind(".ScrollToFixed"),C.remove(),q.$el.removeData("ScrollToFixed")}),D()},q.init()},a.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3,baseClassName:"scroll-to-fixed-fixed"},a.fn.scrollToFixed=function(b){return this.each(function(){new a.ScrollToFixed(this,b)})}}(jQuery);